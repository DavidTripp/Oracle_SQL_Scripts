SELECT NULL INST, NULL SID, NULL SQL_ID, NULL SQL_EXEC_ID, NULL SQL_EXEC_START,
  NULL BIND_NAME, NULL BIND_VALUE, NULL BIND_TYPE FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL INST, NULL SID, NULL SQL_ID, NULL SQL_EXEC_ID, NULL SQL_EXEC_START,
  NULL BIND_NAME, NULL BIND_VALUE, NULL BIND_TYPE FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    DECODE(INSTANCE_NUMBER, -1, USERENV('INSTANCE'), INSTANCE_NUMBER) INSTANCE_NUMBER,
    SESSION_ID,
    SQL_ID,
    SQL_EXEC_ID,
    STATUS
  FROM
  ( SELECT
      -1 INSTANCE_NUMBER,
      -1 SESSION_ID,
      '0jfcu5ahnb09q' SQL_ID,
      -1 SQL_EXEC_ID,
      '%' STATUS    /* EXECUTING, DONE (ERROR), DONE (FIRST N ROWS), DONE (ALL ROWS) or DONE */
    FROM
      DUAL
  )
)
SELECT
  DECODE(BV.POS, 1, TO_CHAR(SM.INST_ID, 990), NULL) INST,
  DECODE(BV.POS, 1, TO_CHAR(SM.SID, 99990), NULL) SID,
  DECODE(BV.POS, 1, SM.SQL_ID, NULL) SQL_ID,
  DECODE(BV.POS, 1, TO_CHAR(SM.SQL_EXEC_ID, 9999999990), NULL) SQL_EXEC_ID,
  DECODE(BV.POS, 1, TO_CHAR(SM.SQL_EXEC_START, 'dd.mm.yyyy hh24:mi:ss'), NULL) SQL_EXEC_START,
  BV.NAME BIND_NAME,
  BV.VALUE BIND_VALUE,
  BV.TYPE BIND_TYPE
FROM
  BASIS_INFO BI,
  GV$SQL_MONITOR SM,
  XMLTABLE
  ( '/binds/bind'
    PASSING XMLTYPE(SM.BINDS_XML)
    COLUMNS NAME VARCHAR2(30) PATH '@name',
            VALUE VARCHAR2(4000) PATH '.',
            TYPE VARCHAR2(15) PATH '@dtystr',
            POS NUMBER PATH '@pos'
  ) BV
WHERE
  ( BI.INSTANCE_NUMBER = -1 OR BI.INSTANCE_NUMBER = SM.INST_ID ) AND
  ( BI.SESSION_ID = -1 OR SM.SID = BI.SESSION_ID ) AND
  SM.BINDS_XML IS NOT NULL AND
  SM.SQL_ID LIKE BI.SQL_ID AND
  ( BI.SQL_EXEC_ID = -1 OR SM.SQL_EXEC_ID = BI.SQL_EXEC_ID ) AND
  SM.STATUS LIKE BI.STATUS 
ORDER BY
  SM.SQL_EXEC_START DESC,
  SM.INST_ID,
  SM.SID,
  SM.SQL_ID,
  SM.SQL_EXEC_ID,
  BV.POS
));


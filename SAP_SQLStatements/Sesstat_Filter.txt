SELECT NULL SID, NULL STATISTIC#, NULL NAME, NULL VALUE, NULL PERCENT
  FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL SID, NULL STATISTIC#, NULL NAME, NULL VALUE, NULL PERCENT
  FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    -1 INSTANCE_NUMBER,
    -1 SESSION_ID,
    'db block changes' STAT_NAME,
    -1 NUM_RECORDS,
    'PERCENT' ORDER_BY   /* SESSION, VALUE, PERCENT */
  FROM 
    DUAL
)
SELECT
  TO_CHAR(SID, 99990) SID,
  TO_CHAR(STATISTIC#, 999999990) STATISTIC#,
  NAME,
  TO_CHAR(VALUE, 99999999999990) VALUE,
  TO_CHAR(PERCENT, 990.99) PERCENT
FROM
( SELECT
    *
  FROM
  ( SELECT
      SS.INST_ID,
      SS.SID SID,
      SN.STATISTIC# STATISTIC#,
      SN.NAME NAME,
      SS.VALUE VALUE,
      NVL(RATIO_TO_REPORT(SS.VALUE) OVER (PARTITION BY SS.STATISTIC#) * 100, 0) PERCENT,
      BI.NUM_RECORDS,
      BI.ORDER_BY,
      BI.INSTANCE_NUMBER BI_INST_ID,
      BI.SESSION_ID BI_SID
    FROM
      BASIS_INFO BI,
      GV$STATNAME SN,
      GV$SESSTAT SS
    WHERE
      SN.NAME LIKE BI.STAT_NAME AND
      SN.INST_ID = SS.INST_ID AND
      SN.STATISTIC# = SS.STATISTIC# 
  )
  ORDER BY
    DECODE(ORDER_BY, 'SESSION', SID, 1),
    DECODE(ORDER_BY, 'VALUE', VALUE, 'PERCENT', PERCENT, 1) DESC,
    STATISTIC#
)
WHERE
( BI_INST_ID = -1 OR
  INST_ID = BI_INST_ID ) AND
( BI_SID = -1 OR
  SID = BI_SID ) AND
( NUM_RECORDS = -1 OR
  ROWNUM <= NUM_RECORDS )
));
SELECT NULL OWNER, NULL TABLE_NAME, NULL COLUMN_NAME, NULL HIDDEN, NULL REASON FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL OWNER, NULL TABLE_NAME, NULL COLUMN_NAME, NULL HIDDEN, NULL REASON FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT /*+ OPT_PARAM('OPTIMIZER_DYNAMIC_SAMPLING', 6) */
    /* 11g: Column group statistics */
    'SAP%' OWNER
  FROM
    DUAL
)
SELECT
  TC.OWNER,
  TC.TABLE_NAME,
  TC.COLUMN_NAME,
  TC.HIDDEN_COLUMN HIDDEN,
  DECODE(SUBSTR(TC.COLUMN_NAME, 1, 6), 'SYS_NC', 'FUNCTION BASED INDEX', 'SYS_C0', 'DROPPED VIRTUAL COLUMN', 
    DECODE(TO_CHAR(SE.EXTENSION), NULL, 
    '?', 'COLUMN GROUP ' || TO_CHAR(SE.EXTENSION))) REASON
FROM
  BASIS_INFO BI,
  DBA_TAB_COLS TC,
  DBA_STAT_EXTENSIONS SE
WHERE
  TC.OWNER LIKE BI.OWNER AND
  TC.VIRTUAL_COLUMN = 'YES' AND
  TC.OWNER = SE.OWNER (+) AND
  TC.TABLE_NAME = SE.TABLE_NAME (+) AND
  TC.COLUMN_NAME = SE.EXTENSION_NAME (+) 
ORDER BY
  TC.OWNER,
  TC.TABLE_NAME,
  TC.COLUMN_NAME
));

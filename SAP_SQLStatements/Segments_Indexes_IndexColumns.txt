SELECT NULL INDEX_NAME, NULL U, NULL B, NULL P, NULL F, NULL CM, NULL NUM_ROWS, 
  NULL DIST_KEYS, NULL COLUMN_NAME, 
  NULL NUM_DISTINCT, NULL AVG_COL_LEN, NULL ROWS_PER_VALUE FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL INDEX_NAME, NULL U, NULL B, NULL P, NULL F, NULL CM, NULL NUM_ROWS, 
  NULL DIST_KEYS, NULL COLUMN_NAME, 
  NULL NUM_DISTINCT, NULL AVG_COL_LEN, NULL ROWS_PER_VALUE FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    'SAP%' OWNER,
    'DFKKOP' TABLE_NAME,
    '%' INDEX_NAME
  FROM
    DUAL
)
SELECT
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', IC.INDEX_NAME) INDEX_NAME,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', DECODE(I.UNIQUENESS, 'UNIQUE', 'X', ' ')) U,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', DECODE(I.INDEX_TYPE, 'BITMAP', 'X', ' ')) B,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', DECODE(I.PARTITIONED, 'YES', 'X', ' ')) P,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', DECODE(I.INDEX_TYPE, 'FUNCTION-BASED NORMAL', 'X', ' ')) F,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', I.PREFIX_LENGTH) CM,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', TO_CHAR(I.NUM_ROWS, 9999999990)) NUM_ROWS,
  DECODE(LAG(IC.INDEX_NAME, 1) OVER (ORDER BY IC.INDEX_OWNER, IC.INDEX_NAME, IC.COLUMN_POSITION),
    IC.INDEX_NAME, ' ', TO_CHAR(I.DISTINCT_KEYS, 9999999990)) DIST_KEYS,
  IC.COLUMN_NAME,
  TO_CHAR(TC.NUM_DISTINCT, 99999999990) NUM_DISTINCT,
  TO_CHAR(TC.AVG_COL_LEN, 9999999990) AVG_COL_LEN,
  TO_CHAR(DECODE(TC.NUM_DISTINCT, 0, 0, I.NUM_ROWS / TC.NUM_DISTINCT), 9999999990.99) ROWS_PER_VALUE
FROM
  BASIS_INFO BI,
  DBA_TAB_COLS TC,
  DBA_IND_COLUMNS IC,
  DBA_INDEXES I
WHERE
  TC.OWNER LIKE BI.OWNER AND
  TC.TABLE_NAME LIKE BI.TABLE_NAME AND
  IC.INDEX_NAME LIKE BI.INDEX_NAME AND
  IC.TABLE_OWNER = TC.OWNER AND
  IC.TABLE_NAME = TC.TABLE_NAME AND
  IC.COLUMN_NAME = TC.COLUMN_NAME AND
  I.TABLE_OWNER = IC.TABLE_OWNER AND
  I.INDEX_NAME = IC.INDEX_NAME 
ORDER BY
  IC.INDEX_OWNER,
  IC.INDEX_NAME,
  IC.COLUMN_POSITION
));
SELECT NULL OWNER, NULL TABLE_NAME, NULL TSP_EXAMPLE_1, NULL TSP_EXAMPLE_2, 
  NULL NUM_DIFF_TABLESPACES FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL OWNER, NULL TABLE_NAME, NULL TSP_EXAMPLE_1, NULL TSP_EXAMPLE_2, 
  NULL NUM_DIFF_TABLESPACES FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    'SAP%' OWNER
  FROM
    DUAL
)
SELECT
  OWNER,
  TABLE_NAME, 
  TSP_EXAMPLE_1,
  TSP_EXAMPLE_2,
  NUM_DIFF_TABLESPACES
FROM
( SELECT
    I.OWNER,
    I.TABLE_NAME,
    MIN(I.TABLESPACE_NAME) TSP_EXAMPLE_1,
    MAX(I.TABLESPACE_NAME) TSP_EXAMPLE_2,
    TO_CHAR(COUNT(DISTINCT(I.TABLESPACE_NAME)), 
      9999999999999999990) NUM_DIFF_TABLESPACES
  FROM
    BASIS_INFO BI,
    DBA_INDEXES I
  WHERE
    I.OWNER LIKE BI.OWNER AND
    I.INDEX_TYPE NOT IN ('IOT - TOP', 'LOB')
  GROUP BY
    I.OWNER,
    I.TABLE_NAME
)
WHERE 
  NUM_DIFF_TABLESPACES > 1
ORDER BY
  TABLE_NAME
));

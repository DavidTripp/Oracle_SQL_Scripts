SELECT NULL DISKGROUP, NULL DISKINFO, NULL TOTAL_MB, NULL FREE_MB, NULL USED_PCT,
NULL AVG_READ_MS, NULL AVG_WRITE_MS FROM DUAL WHERE 1=0 
UNION ALL
(SELECT NULL DISKGROUP, NULL DISKINFO, NULL TOTAL_MB, NULL FREE_MB, NULL USED_PCT,
NULL AVG_READ_MS, NULL AVG_WRITE_MS FROM DUAL WHERE 1=0)
UNION ALL
SELECT * FROM (
WITH BASIS_INFO AS
(
SELECT 
	'X' QUICK /*+ Use v$asm_disk_stat and v$asm_diskgroup_stat for quick access, but new disks will not be included */
FROM
	DUAL
),
ASMFILE AS
(
SELECT 
	GROUP_NUMBER,
	LISTAGG(TYPE,',')
	WITHIN GROUP(ORDER BY TYPE) FILETYPE
FROM
(SELECT UNIQUE GROUP_NUMBER, TYPE FROM V$ASM_FILE)
GROUP BY
	GROUP_NUMBER
)
SELECT 
	DISKGROUP,
	DISKINFO,
	TOTAL_MB,
	FREE_MB,
	USED_PCT,
	AVG_READ_MS,
	AVG_WRITE_MS
FROM 
(
	SELECT
		DGNAME,
		ISTOTAL,
		DISKNAME,	
		DECODE(ISTOTAL,1,DGNAME,' ') DISKGROUP,
		NVL(DISKNAME, 'Content File Type ('||FILETYPE||')') DISKINFO,
		TO_CHAR(TOTAL_MB,'999999999999') TOTAL_MB,
		TO_CHAR(FREE_MB,'999999999999') FREE_MB,
		DECODE(TOTAL_MB,0,'N/A',TO_CHAR((TOTAL_MB-FREE_MB)/TOTAL_MB*100,990.99)) USED_PCT,
		DECODE(READS,0,'N/A',TO_CHAR(READ_TIME/READS*1000,999990.99)) AVG_READ_MS,
		DECODE(WRITES,0,'N/A',TO_CHAR(WRITE_TIME/WRITES*1000,999990.99)) AVG_WRITE_MS
	FROM
	(
		SELECT 
			ADG.NAME DGNAME,
			AD.NAME DISKNAME,
			AF.FILETYPE FILETYPE,
			SUM(AD.TOTAL_MB) TOTAL_MB,
			SUM(AD.FREE_MB) FREE_MB,
			SUM(AD.READS) READS,
			SUM(AD.READ_TIME) READ_TIME,
			SUM(AD.WRITES) WRITES,
			SUM(AD.WRITE_TIME) WRITE_TIME,
			GROUPING(AD.NAME) ISTOTAL
		FROM
			V$ASM_DISK_STAT AD,
			V$ASM_DISKGROUP_STAT ADG,
			ASMFILE AF,
			BASIS_INFO BI
		WHERE
			AD.GROUP_NUMBER = ADG.GROUP_NUMBER AND
			AF.GROUP_NUMBER = ADG.GROUP_NUMBER AND
			BI.QUICK = 'X'
		GROUP BY ADG.NAME, AF.FILETYPE, ROLLUP(AD.NAME)
	)
	UNION ALL
	SELECT
		DGNAME,
		ISTOTAL,
		DISKNAME,
		DECODE(ISTOTAL,1,DGNAME,' ') DISKGROUP,
		NVL(DISKNAME, 'Content File Type ('||FILETYPE||')') DISKINFO,
		TO_CHAR(TOTAL_MB,'999999999999') TOTAL_MB,
		TO_CHAR(FREE_MB,'999999999999') FREE_MB,
		DECODE(TOTAL_MB,0,'N/A',TO_CHAR((TOTAL_MB-FREE_MB)/TOTAL_MB*100,990.99)) USED_PCT,
		DECODE(READS,0,'N/A',TO_CHAR(READ_TIME/READS*1000,999990.99)) AVG_READ_MS,
		DECODE(WRITES,0,'N/A',TO_CHAR(WRITE_TIME/WRITES*1000,999990.99)) AVG_WRITE_MS
	FROM
	(
		SELECT 
			ADG.NAME DGNAME,
			AD.NAME DISKNAME,
			AF.FILETYPE FILETYPE,
			SUM(AD.TOTAL_MB) TOTAL_MB,
			SUM(AD.FREE_MB) FREE_MB,
			SUM(AD.READS) READS,
			SUM(AD.READ_TIME) READ_TIME,
			SUM(AD.WRITES) WRITES,
			SUM(AD.WRITE_TIME) WRITE_TIME,
			GROUPING(AD.NAME) ISTOTAL
		FROM
			V$ASM_DISK AD,
			V$ASM_DISKGROUP ADG,
			ASMFILE AF,
			BASIS_INFO BI
		WHERE
			AD.GROUP_NUMBER = ADG.GROUP_NUMBER AND
			AF.GROUP_NUMBER = ADG.GROUP_NUMBER AND
			BI.QUICK IS NULL
		GROUP BY ADG.NAME, AF.FILETYPE, ROLLUP(AD.NAME)
	)
)
ORDER BY
	DGNAME ASC, ISTOTAL DESC, DISKNAME 
);
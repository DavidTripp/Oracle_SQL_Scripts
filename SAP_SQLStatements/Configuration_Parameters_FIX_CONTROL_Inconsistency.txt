SELECT NULL BUGNO, NULL PARAMETER_VALUE, NULL EFFECTIVE_VALUE
  FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL BUGNO, NULL PARAMETER_VALUE, NULL EFFECTIVE_VALUE
  FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    DECODE(INSTANCE_NUMBER, -1, USERENV('INSTANCE'), INSTANCE_NUMBER) INSTANCE_NUMBER
  FROM
  ( SELECT
      -1 INSTANCE_NUMBER
    FROM
      DUAL
   )
),
FIX_CONTROL_PARAMETERS AS
( SELECT /*+ MATERIALIZE */
    BUGNO PBUGNO,
    DECODE(UPPER(VALUE), 'ON', 1, 'OFF', 0, VALUE) PVALUE
  FROM
  ( SELECT
      SUBSTR(VALUE, 1, INSTR(VALUE, ':') - 1) BUGNO,
      SUBSTR(VALUE, INSTR(VALUE, ':') + 1) VALUE
    FROM
    ( SELECT
        REPLACE(VALUE, CHR(10), NULL) VALUE
      FROM
        BASIS_INFO BI,
        GV$PARAMETER2 P
      WHERE
        BI.INSTANCE_NUMBER = P.INST_ID AND
        UPPER(NAME) = '_FIX_CONTROL'
    )
  )
)
SELECT
  P.PBUGNO BUGNO,
  TO_CHAR(P.PVALUE, 9999999999990) PARAMETER_VALUE,
  DECODE(F.VALUE, NULL, 'n/a', TO_CHAR(F.VALUE, 9999999999990)) EFFECTIVE_VALUE
FROM
  FIX_CONTROL_PARAMETERS P LEFT OUTER JOIN
  V$SYSTEM_FIX_CONTROL F ON
    F.BUGNO = P.PBUGNO
WHERE
  F.VALUE != P.PVALUE OR
  F.VALUE IS NULL
ORDER BY
  F.BUGNO
));

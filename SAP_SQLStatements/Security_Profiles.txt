SELECT NULL USER_NAME, NULL PROFILE_NAME, NULL RESOURCE_NAME, NULL LIMIT
  FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL USER_NAME, NULL PROFILE_NAME, NULL RESOURCE_NAME, NULL LIMIT
  FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
WITH BASIS_INFO AS
( SELECT
    'SAP%' USER_NAME,
    'X' ONLY_LIMITED_RESOURCES
  FROM
    DUAL
)
SELECT
  U.USERNAME USER_NAME,
  P.PROFILE PROFILE_NAME,
  P.RESOURCE_NAME,
  DECODE(P.LIMIT, 'DEFAULT', DP.LIMIT, P.LIMIT) LIMIT
FROM
  BASIS_INFO BI,
  DBA_USERS U,
  DBA_PROFILES P,
  DBA_PROFILES DP
WHERE
  U.USERNAME LIKE BI.USER_NAME AND
  U.PROFILE = P.PROFILE AND
  ( BI.ONLY_LIMITED_RESOURCES = ' ' OR
    DECODE(P.LIMIT, 'DEFAULT', DP.LIMIT, P.LIMIT) NOT IN ( 'NULL', 'UNLIMITED' ) ) AND
  DP.PROFILE = 'DEFAULT' AND
  DP.RESOURCE_NAME = P.RESOURCE_NAME
));

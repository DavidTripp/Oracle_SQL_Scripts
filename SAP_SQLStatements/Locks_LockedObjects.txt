SELECT NULL OBJECT_NAME, NULL SUBOBJECT_NAME, NULL INST_ID, NULL SID, NULL CTIME_S, 
  NULL LMODE, NULL REQUEST, NULL BLOCK FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL OBJECT_NAME, NULL SUBOBJECT_NAME, NULL INST_ID, NULL SID, NULL CTIME_S,
  NULL LMODE, NULL REQUEST, NULL BLOCK FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM ( 
WITH BASIS_INFO AS
( SELECT
    DECODE(INSTANCE_NUMBER, -1, USERENV('INSTANCE'), INSTANCE_NUMBER) INSTANCE_NUMBER,
    OBJECT_NAME,
    SESSION_ID
  FROM
  ( SELECT
      -1 INSTANCE_NUMBER,         /* -2 for all instances, -1 for current instance */
      '%' OBJECT_NAME,
      -1  SESSION_ID
    FROM
      DUAL
  )
)
SELECT
  DECODE(RN, 1, OBJECT_NAME, ' ') OBJECT_NAME,
  SUBOBJECT_NAME,
  TO_CHAR(INST_ID, 999990) INST_ID,
  TO_CHAR(SID, 99990) SID,
  TO_CHAR(CTIME, 9999990) CTIME_S,
  TO_CHAR(LMODE, 9990) LMODE,
  TO_CHAR(REQUEST, 999990) REQUEST,
  TO_CHAR(BLOCK, 9990) BLOCK
FROM
( SELECT
    O.OBJECT_NAME,
    O.SUBOBJECT_NAME,
    L.INST_ID,
    L.SID,
    L.CTIME,
    L.LMODE,
    L.REQUEST,
    L.BLOCK,
    ROW_NUMBER () OVER (PARTITION BY O.OBJECT_NAME, O.SUBOBJECT_NAME ORDER BY CTIME DESC) RN
  FROM
    BASIS_INFO BI,
    GV$LOCK L,
    DBA_OBJECTS O
  WHERE
    ( BI.INSTANCE_NUMBER = -2 OR
      BI.INSTANCE_NUMBER = L.INST_ID ) AND
    O.OBJECT_NAME LIKE BI.OBJECT_NAME AND
    BI.SESSION_ID IN (-1, BI.SESSION_ID ) AND
    L.TYPE = 'TM' AND
    L.ID1 = O.OBJECT_ID
  ORDER BY
    OBJECT_NAME,
    SUBOBJECT_NAME,
    CTIME DESC
)
));